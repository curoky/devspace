version: '3'

tasks:
  build:
    cmds:
      - >
        docker buildx build .
        --network=host --file Dockerfile.{{.version}}
        --tag curoky/devspace:{{.version}}
  tf2.5-cu11.0.3:
    deps:
      - task: build
        vars:
          version: tf2.5-cu11.0.3-cudnn8.1.0-gcc8-py3.7
  tf2.5-cu11.4.0:
    deps:
      - task: build
        vars:
          version: tf2.5-cu11.4.0-cudnn8.1.0-gcc8-py3.7
  tf2.16-cu12.3.2:
    deps:
      - task: build
        vars:
          version: tf2.16-cu12.3.2-cudnn8.9.7-gcc11-py3.11
  tf2.17-cu12.3.2:
    deps:
      - task: build
        vars:
          version: tf2.16-cu12.3.2-cudnn8.9.7-gcc10-py3.12
